import{d as S,u as D,a as V,r as m,c as f,b as t,e as k,w as I,f as b,v as x,g as N,t as C,h as A,o as w,_ as E,i as g}from"./index-CGZOc8ps.js";import{s as q}from"./crypto-6rmKMyJD.js";const B={class:"min-h-screen flex items-center justify-center p-6 relative overflow-hidden"},L={class:"relative z-10 w-full max-w-[420px]"},M={class:"login-card-glass rounded-3xl py-10 px-8"},R=["disabled"],j={key:0,class:"btn-loading-spinner"},U=S({__name:"LoginView",setup(z){const v=A(),d=D(),h=V(),u=m(""),c=m(""),n=m(!1);function y(r){var l,i,p,a;const e=(l=r.response)==null?void 0:l.status,s=(p=(i=r.response)==null?void 0:i.data)==null?void 0:p.detail,o=typeof s=="string"?s:Array.isArray(s)?((a=s[0])==null?void 0:a.msg)??"":"";return e===401?"사용자 ID 또는 비밀번호가 올바르지 않습니다.":e===400?/nonce|NONCE/i.test(o)?"보안 인증이 만료되었습니다. 페이지를 새로고침한 뒤 다시 로그인해 주세요.":/user_id|password|required/i.test(o)?"사용자 ID와 비밀번호를 모두 입력해 주세요.":o||"입력 내용을 확인해 주세요.":e===404?"로그인 서비스를 찾을 수 없습니다. 서버 설정을 확인하거나 잠시 후 다시 시도해 주세요.":e===503||e===502?"일시적으로 로그인할 수 없습니다. 잠시 후 다시 시도해 주세요.":e>=500?"서버 오류가 발생했습니다. 잠시 후 다시 시도해 주세요.":r.message==="Network Error"||!e?"서버에 연결할 수 없습니다. 네트워크와 서버 상태를 확인해 주세요.":o||"로그인에 실패했습니다. 다시 시도해 주세요."}const _=async()=>{var s;const r=u.value.trim(),e=c.value;if(!r||!e){d.show("사용자 ID와 비밀번호를 입력하세요.","warning");return}n.value=!0;try{const l=(s=(await g.get("/api/auth/nonce")).data)==null?void 0:s.nonce;if(!l){d.show("보안 토큰을 받지 못했습니다. 페이지를 새로고침한 뒤 다시 시도해 주세요.","error");return}const i=await q(e),a=(await g.post("/api/auth/login",{user_id:r,password:i,nonce:l})).data.user;h.login({id:a.id,name:a.name,email:a.email||""}),v.push("/")}catch(o){d.show(y(o),"error")}finally{n.value=!1}};return(r,e)=>(w(),f("div",B,[e[6]||(e[6]=t("div",{class:"absolute inset-0 z-0 login-bg-gradient"},null,-1)),t("div",L,[t("div",M,[e[4]||(e[4]=k('<div class="text-center mb-8"><div class="inline-flex items-center gap-2 mb-5"><img src="'+E+'" alt="로고" class="h-9 w-auto"><span class="text-[1.35rem] font-bold text-slate-900">한국도로공사</span></div><h1 class="text-xl font-semibold text-slate-700 mb-[0.35rem]">CCTV 통합 관제 시스템</h1><p class="text-[0.9rem] text-slate-500">시스템 이용을 위해 로그인해 주세요.</p></div>',1)),t("form",{onSubmit:I(_,["prevent"]),class:"flex flex-col gap-[1.35rem]"},[t("div",null,[e[2]||(e[2]=t("label",{for:"user_id",class:"block text-sm font-medium text-slate-600 mb-2"},"사용자 ID",-1)),b(t("input",{id:"user_id","onUpdate:modelValue":e[0]||(e[0]=s=>u.value=s),type:"text",autocomplete:"username",required:"",placeholder:"사용자 ID를 입력하세요",class:"w-full px-4 py-3 text-base leading-6 text-slate-900 bg-slate-50 border border-slate-200 rounded-xl outline-none transition-[border-color,box-shadow] duration-200 placeholder:text-slate-400 focus:border-blue-500 focus:shadow-[0_0_0_3px_rgba(59,130,246,0.2)] focus:bg-white"},null,512),[[x,u.value]])]),t("div",null,[e[3]||(e[3]=t("label",{for:"password",class:"block text-sm font-medium text-slate-600 mb-2"},"비밀번호",-1)),b(t("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=s=>c.value=s),type:"password",autocomplete:"current-password",required:"",placeholder:"비밀번호를 입력하세요",class:"w-full px-4 py-3 text-base leading-6 text-slate-900 bg-slate-50 border border-slate-200 rounded-xl outline-none transition-[border-color,box-shadow] duration-200 placeholder:text-slate-400 focus:border-blue-500 focus:shadow-[0_0_0_3px_rgba(59,130,246,0.2)] focus:bg-white"},null,512),[[x,c.value]])]),t("button",{type:"submit",disabled:n.value,class:"mt-2 w-full py-3.5 px-5 text-base font-semibold text-white btn-login-gradient border-0 rounded-xl cursor-pointer transition-[opacity,transform] duration-[0.2s,0.15s] relative flex items-center justify-center min-h-[2.75rem] hover:opacity-95 hover:-translate-y-px active:translate-y-0 disabled:opacity-70 disabled:cursor-not-allowed"},[n.value?(w(),f("span",j)):N("",!0),t("span",null,C(n.value?"로그인 중...":"로그인"),1)],8,R)],32),e[5]||(e[5]=t("p",{class:"mt-7 pt-6 border-t border-slate-100 text-center text-[0.8rem] text-slate-400"},"계정이 없으시면 시스템 관리자에게 문의해 주세요.",-1))])])]))}});export{U as default};
