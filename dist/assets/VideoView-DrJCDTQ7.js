import{G as O,d as B,r as w,m as D,c as u,F as A,s as L,x as q,g as R,b as e,z as $,y as N,q as V,N as E,B as G,t as C,o,H as Z,p as I,O as P,V as j}from"./index-CGZOc8ps.js";/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=O("FileIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=O("FolderIcon",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),Q={class:"virtual-tree-container"},U={key:0,class:"tree-list"},W={class:"tree-node"},X=["onClick"],Y={class:"tree-expand-icon"},ee={key:1,class:"expand-placeholder"},te={class:"tree-node-icon-wrapper"},le={class:"tree-node-label"},se={key:1,class:"empty-tree"},ae=B({__name:"VirtualTree",props:{data:{},itemHeight:{default:32},searchTerm:{default:""}},emits:["nodeClick"],setup(S,{emit:b}){const m=S,f=b,g=w(new Set),v=w(null),d=(i,c=0,a=null)=>{const p=[];for(const h of i){const x=h.id||`${a||""}-${h.label}`,z=!!(h.children&&h.children.length>0),T=g.value.has(x)||h.defaultOpen||!1,F={...h,id:x,level:c,parentId:a,hasChildren:z,isOpen:T};p.push(F),T&&z&&h.children&&p.push(...d(h.children,c+1,x))}return p},t=(i,c)=>c?i.reduce((a,p)=>{const h=p.label.toLowerCase().includes(c.toLowerCase()),x=p.children?t(p.children,c):[];return(h||x.length>0)&&a.push({...p,children:x,defaultOpen:!0}),a},[]):i,_=D(()=>t(m.data,m.searchTerm)),l=D(()=>d(_.value)),k=i=>{if(v.value=i.id||null,!i.hasChildren){f("nodeClick",i);return}const c=i.id;g.value.has(c)?g.value.delete(c):g.value.add(c)};return(i,c)=>(o(),u("div",Q,[l.value.length>0?(o(),u("div",U,[(o(!0),u(A,null,L(l.value,(a,p)=>(o(),u("div",{key:a.id||p,class:"tree-node-wrapper",style:q({paddingLeft:`${(a.level||0)*20}px`})},[(a.level||0)>0?(o(),u("div",{key:0,class:"tree-line",style:q({left:`${((a.level||0)-1)*20+8}px`})},null,4)):R("",!0),e("div",W,[e("button",{onClick:h=>k(a),class:$(["tree-node-button",{"has-children":a.hasChildren,"is-open":a.isOpen,"is-selected":v.value===a.id}])},[e("div",Y,[a.hasChildren?(o(),N(V(E),{key:0,size:16,class:$(["expand-arrow",{expanded:a.isOpen}])},null,8,["class"])):(o(),u("div",ee))]),e("div",te,[a.icon?(o(),N(G(a.icon),{key:0,size:18,class:"tree-node-icon"})):a.hasChildren?(o(),N(V(K),{key:1,size:18,class:$(["tree-node-icon","folder-icon",{"folder-open":a.isOpen}])},null,8,["class"])):(o(),N(V(J),{key:2,size:18,class:"tree-node-icon file-icon"}))]),e("span",le,C(a.label),1)],10,X)])],4))),128))])):(o(),u("div",se,[...c[0]||(c[0]=[e("p",{class:"empty-message"},"데이터가 없습니다.",-1)])]))]))}}),re=Z(ae,[["__scopeId","data-v-39ee2c37"]]),ne={class:"flex-1 flex gap-4 min-h-0"},oe={class:"w-64 bg-white rounded-xl border border-slate-200 flex flex-col shrink-0"},ie={class:"p-2 border-b border-slate-200"},ce={class:"flex flex-wrap gap-1"},de=["onClick"],ue={class:"px-4 py-3 border-b border-slate-100 bg-slate-50/50"},he={class:"flex items-center justify-between mb-2"},ve={class:"text-xs text-slate-400"},pe={class:"relative"},be=["value"],me={class:"flex-1 p-2"},fe={key:0,class:"text-center py-4"},ge={class:"flex-1 flex flex-col gap-4 min-h-0"},_e={class:"video-view-button-group-container"},xe={class:"video-view-button-group"},ye=["onClick"],$e={class:"video-view-button-group"},ke=["onClick"],Ce={class:"absolute inset-0 flex items-center justify-center text-slate-600"},we={class:"absolute bottom-2 left-2 right-2 bg-black/60 backdrop-blur-sm px-2 py-1 rounded text-xs text-white font-medium truncate"},Te=B({__name:"VideoView",props:{treeFilters:{default:()=>[]},treeFilter:{default:"virtual-server"},searchTerm:{default:""},streamType:{default:"default"},gridLayout:{default:"2x2"},cctvTreeData:{default:()=>{const S=()=>["가상서버-01","가상서버-02","가상서버-03","가상서버-04"].map((d,t)=>({id:`virtual-server-${t+1}`,label:d,icon:null,children:Array.from({length:8},(_,l)=>({id:`virtual-server-${t+1}-cam-${l+1}`,label:`CAM-${String(t*8+l+1).padStart(3,"0")}`,icon:null}))})),b=()=>["미디어서버-A","미디어서버-B","미디어서버-C"].map((d,t)=>({id:`media-${t+1}`,label:d,icon:null,children:Array.from({length:10},(_,l)=>({id:`media-${t+1}-cam-${l+1}`,label:`CAM-${String(t*10+l+1).padStart(3,"0")}`,icon:null}))})),m=()=>["서울본부","부산본부","대구본부","인천본부","광주본부"].map((d,t)=>({id:`hq-${t+1}`,label:d,icon:null,children:Array.from({length:5},(_,l)=>({id:`hq-${t+1}-zone-${l+1}`,label:`${l+1}구역`,icon:null,children:Array.from({length:6},(k,i)=>({id:`hq-${t+1}-zone-${l+1}-cam-${i+1}`,label:`CAM-${String(t*30+l*6+i+1).padStart(3,"0")}`,icon:null}))}))})),f=()=>["1호선","2호선","3호선","4호선","경의선","수인선"].map((d,t)=>({id:`route-${t+1}`,label:d,icon:null,children:Array.from({length:8},(_,l)=>({id:`route-${t+1}-station-${l+1}`,label:`${l+1}번역`,icon:null,children:Array.from({length:4},(k,i)=>({id:`route-${t+1}-station-${l+1}-cam-${i+1}`,label:`CAM-${String(t*32+l*4+i+1).padStart(3,"0")}`,icon:null}))}))})),g=()=>["차단 카메라","SMS 알림 카메라","일반 카메라"].map((d,t)=>({id:`block-sms-${t+1}`,label:d,icon:null,children:Array.from({length:12},(_,l)=>({id:`block-sms-${t+1}-cam-${l+1}`,label:`CAM-${String(t*12+l+1).padStart(3,"0")}`,icon:null}))}));return{"virtual-server":S(),media:b(),headquarters:m(),route:f(),"block-sms":g()}}}},setup(S){const b=S,m=w(b.treeFilter),f=w(b.searchTerm),g=w(b.streamType),v=w(b.gridLayout),d=[{id:"virtual-server",label:"가상서버"},{id:"media",label:"미디어"},{id:"headquarters",label:"본부별"},{id:"route",label:"노선별"},{id:"block-sms",label:"차단/SMS"}],t=[{id:"default",label:"기본"},{id:"original",label:"원본"},{id:"transcoded",label:"변환"},{id:"media",label:"미디어(RTSP)"}],_=[{id:"1x1",label:"1x1"},{id:"2x2",label:"2x2"},{id:"3x3",label:"3x3"},{id:"4x4",label:"4x4"}],l=(r,n)=>n?r.reduce((s,y)=>{const H=y.label.toLowerCase().includes(n.toLowerCase()),M=y.children?l(y.children,n):[];return(H||M.length>0)&&s.push({...y,defaultOpen:!0,children:M}),s},[]):r,k=D(()=>{const r=b.cctvTreeData[m.value]||[];return l(r,f.value)}),i=D(()=>{const[r]=v.value.split("x").map(Number);return`grid-cols-${r}`}),c=D(()=>{const[r,n]=v.value.split("x").map(Number);return r*n}),a=r=>{m.value=r},p=r=>{const n=r.target;f.value=n.value},h=r=>{g.value=r},x=r=>{v.value=r},z=r=>{console.log("Node clicked:",r)},T=r=>{let n=0;for(const s of r)s.children&&s.children.length>0?n+=T(s.children):n+=1;return n},F=r=>{const n=b.cctvTreeData[r]||[];return T(n)};return(r,n)=>(o(),u("div",ne,[e("div",oe,[e("div",ie,[e("div",ce,[(o(),u(A,null,L(d,s=>e("button",{key:s.id,onClick:y=>a(s.id),class:$(["px-2 py-1 text-xs rounded border transition-colors",m.value===s.id?"bg-blue-600 text-white border-blue-600":"bg-white text-slate-600 border-slate-200 hover:bg-slate-50"])},C(s.label),11,de)),64))])]),e("div",ue,[e("div",he,[n[0]||(n[0]=e("h3",{class:"font-bold text-slate-800 text-sm"}," 카메라 목록 ",-1)),e("span",ve,C(F(m.value))+"대 ",1)]),e("div",pe,[e("input",{type:"text",placeholder:"카메라 검색...",value:f.value,onInput:p,class:"w-full text-xs bg-white border border-slate-200 rounded-md pl-8 pr-2 py-1.5 focus:outline-none focus:border-blue-500 transition-colors"},null,40,be),I(V(P),{size:12,class:"absolute left-2.5 top-1/2 -translate-y-1/2 text-slate-400"})])]),e("div",me,[k.value.length===0&&f.value?(o(),u("div",fe,[...n[1]||(n[1]=[e("p",{class:"text-xs text-slate-400"},"검색 결과가 없습니다.",-1)])])):(o(),N(re,{key:1,data:k.value,"item-height":32,"search-term":f.value,onNodeClick:z},null,8,["data","search-term"]))])]),e("div",ge,[e("div",_e,[e("div",xe,[(o(),u(A,null,L(t,s=>e("button",{key:s.id,onClick:y=>h(s.id),class:$(["video-view-button-group-item",g.value===s.id?"video-view-button-group-item-active":"video-view-button-group-item-inactive"])},C(s.label),11,ye)),64))]),e("div",$e,[(o(),u(A,null,L(_,s=>e("button",{key:s.id,onClick:y=>x(s.id),class:$(["video-view-button-group-item",v.value===s.id?"video-view-button-group-item-active":"video-view-button-group-item-inactive"])},C(s.label),11,ke)),64))])]),e("div",{class:$(["flex-1 grid gap-3 min-h-0",i.value])},[(o(!0),u(A,null,L(c.value,s=>(o(),u("div",{key:s,class:"bg-slate-900 rounded-lg overflow-hidden relative group"},[e("div",Ce,[I(V(j),{size:48,class:"text-slate-700"})]),n[2]||(n[2]=e("div",{class:"absolute top-2 left-2 bg-red-600 px-2 py-0.5 rounded-[3px] flex items-center gap-1.5"},[e("span",{class:"w-1.5 h-1.5 bg-white rounded-full animate-pulse"}),e("span",{class:"text-xs font-bold text-white tracking-tighter"},"LIVE")],-1)),e("div",we," CAM-"+C(String(s).padStart(3,"0")),1)]))),128))],2)])]))}});export{Te as default};
