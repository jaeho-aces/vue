import{_ as Y}from"./Table.vue_vue_type_script_setup_true_lang-DHkai3mP.js";import{d as g,Q as U,u as q,r as O,m as k,X as G,k as T,y as M,W as S,o as D,H as I,i as v,c as L,b as E,F as W,s as B,z as F,t as P,B as H}from"./index-CGZOc8ps.js";import{s as R}from"./crypto-6rmKMyJD.js";const j=50,K=g({__name:"CommonCode",setup($){const s=U(),l=q(),y=O(!1),u=g({props:{value:{type:[String,Number],default:""}},setup(e){return()=>S("span",{class:"text-sm text-slate-700"},String(e.value||""))}}),C=g({props:{value:{type:[String,Number],default:""}},setup(e){const r=e.value==="Y"||e.value===1||String(e.value).toUpperCase()==="Y";return()=>S("span",{class:["inline-block px-2 py-0.5 rounded text-xs font-bold",r?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-500"]},r?"Y":"N")}});function p(e){if(e==null||e==="")return"";const r=String(e).trim();return r.length>=10?r.slice(0,10):r}const i=g({props:{value:{type:[String,Number],default:""}},setup(e){return()=>S("span",{class:"text-sm text-slate-700"},p(e.value))}}),m=[50,50,150,120,250,100,100,120],h=[{id:"grp_code",header:"그룹 코드",size:m[0],cellComponent:u},{id:"code",header:"코드",size:m[1],cellComponent:u},{id:"code_name",header:"코드 이름",size:m[2],cellComponent:u},{id:"short_code_name",header:"짧은 코드 이름",size:m[3],cellComponent:u},{id:"remarks",header:"설명",size:m[4],cellComponent:u},{id:"ord",header:"표시 순서",size:m[5],cellComponent:u},{id:"use_yn",header:"사용 여부",size:m[6],cellComponent:C},{id:"reg_timestamp",header:"등록 일자",size:m[7],cellComponent:i}],f=["grp_code","code","code_name","short_code_name","use_yn","reg_timestamp"],w=k(()=>s.items.filter(e=>String(e.grp_gbn).toUpperCase()==="C").map(e=>({...e,key:G(e)}))),a=[{id:"grp_gbn",label:"그룹 구분",type:"hidden"},{id:"grp_code",label:"그룹 코드",type:"text",required:!0,placeholder:"예: STATUS",readonlyInEdit:!0,maxLength:5},{id:"code",label:"코드",type:"text",required:!0,placeholder:"예: ACTIVE",readonlyInEdit:!0,maxLength:5},{id:"code_name",label:"코드 이름",type:"text",required:!0,placeholder:"예: 활성 상태",maxLength:500},{id:"short_code_name",label:"짧은 코드 이름",type:"text",required:!1,placeholder:"예: 활성",maxLength:100},{id:"remarks",label:"설명",type:"textarea",required:!1,rows:3,maxLength:500},{id:"ord",label:"표시 순서",type:"number",required:!0,placeholder:"예: 1",min:0,max:99,maxLength:2},{id:"use_yn",label:"사용 여부",type:"yesno",required:!0}],_=async(e,r)=>{var o,n;if(y.value||s.isLoading){console.warn("이미 처리 중인 요청이 있습니다.");return}try{if(y.value=!0,r){const d=new Date,c=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")} ${String(d.getHours()).padStart(2,"0")}:${String(d.getMinutes()).padStart(2,"0")}:${String(d.getSeconds()).padStart(2,"0")}`,b={...e,grp_gbn:"C",reg_timestamp:c};await s.createCommonCode(b)}else await s.updateCommonCode(e.grp_gbn,e.grp_code,e.code,e);l.show(r?"신규 생성 완료":"수정 완료","success")}catch(d){console.error("데이터 저장 실패:",d);const c=s.error||((n=(o=d.response)==null?void 0:o.data)==null?void 0:n.detail)||"데이터 저장 중 오류가 발생했습니다.";l.show(c,"error")}finally{y.value=!1}},t=async e=>{var r,o;if(y.value||s.isLoading){console.warn("이미 처리 중인 요청이 있습니다.");return}try{y.value=!0,await s.deleteCommonCodes(e),l.show("삭제 완료","success")}catch(n){console.error("데이터 삭제 실패:",n);const d=s.error||((o=(r=n.response)==null?void 0:r.data)==null?void 0:o.detail)||"데이터 삭제 중 오류가 발생했습니다.";l.show(d,"error")}finally{y.value=!1}};return T(()=>{s.fetchCommonCodes()}),(e,r)=>(D(),M(Y,{"model-value":w.value,columns:h,"default-visible-columns":f,"form-fields":a,"modal-title":"공통 코드","checkbox-column-width":j,"id-column-width":0,"id-field":"key","hide-id-column":!0,"preference-key":"vms_common_code",onUpdate:_,onDelete:t},null,8,["model-value"]))}}),Z=I(K,[["__scopeId","data-v-02cbdda6"]]),Q=50,X=g({__name:"HeadquartersInfo",setup($){const s=q(),l=g({props:{value:{type:[String,Number],default:""}},setup(t){return()=>S("span",{class:"text-sm text-slate-700"},String(t.value||""))}}),y=g({props:{value:{type:[String,Number],default:""}},setup(t){const e=t.value==="Y"||t.value===1||String(t.value).toUpperCase()==="Y";return()=>S("span",{class:["inline-block px-2 py-0.5 rounded text-xs font-bold",e?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-500"]},e?"Y":"N")}});function u(t){if(t==null||t==="")return"";const e=String(t).trim();return e.length>=10?e.slice(0,10):e}const C=g({props:{value:{type:[String,Number],default:""}},setup(t){return()=>S("span",{class:"text-sm text-slate-700"},u(t.value))}}),p=[70,200,150,250,100,100,120],i=[{id:"code",header:"코드",size:p[0],cellComponent:l},{id:"name",header:"본부 이름",size:p[1],cellComponent:l},{id:"shortName",header:"짧은 이름",size:p[2],cellComponent:l},{id:"description",header:"설명",size:p[3],cellComponent:l},{id:"sortOrder",header:"표시 순서",size:p[4],cellComponent:l},{id:"useYn",header:"사용 여부",size:p[5],cellComponent:y},{id:"registered",header:"등록 일자",size:p[6],cellComponent:C}],m=["code","name","shortName","description","sortOrder","useYn","registered"],h=U(),f=k(()=>h.getByGrpGbn("1").filter(e=>String(e.grp_code||"")==="0").map(e=>({id:`${e.grp_gbn}_${e.grp_code}_${e.code}`,code:e.code||"",name:e.code_name||"",shortName:e.short_code_name||"",description:e.remarks||"",sortOrder:e.ord||0,useYn:e.use_yn||"N",registered:e.reg_timestamp||""}))),w=async(t,e)=>{var r,o;try{const n=new Date,d=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")} ${String(n.getHours()).padStart(2,"0")}:${String(n.getMinutes()).padStart(2,"0")}:${String(n.getSeconds()).padStart(2,"0")}`,c={grp_gbn:"1",grp_code:"0",code:t.code||"",code_name:t.name||"",short_code_name:t.shortName??t.name??"",remarks:t.description||null,ord:t.sortOrder||0,use_yn:t.useYn||"Y",reg_timestamp:e?d:t.registered||null};if(e)await h.createCommonCode(c);else{const b=t.code??(t.id?t.id.split("_").slice(2).join("_"):"");await h.updateCommonCode("1","0",b,c)}s.show(e?"신규 생성 완료":"수정 완료","success")}catch(n){console.error("데이터 저장 실패:",n);const d=h.error||((o=(r=n.response)==null?void 0:r.data)==null?void 0:o.detail)||"데이터 저장 중 오류가 발생했습니다.";s.show(d,"error")}},a=async t=>{var e,r;try{await h.deleteCommonCodes(t),s.show("삭제 완료","success")}catch(o){console.error("데이터 삭제 실패:",o);const n=h.error||((r=(e=o.response)==null?void 0:e.data)==null?void 0:r.detail)||"데이터 삭제 중 오류가 발생했습니다.";s.show(n,"error")}},_=[{id:"code",label:"코드",type:"text",required:!0,placeholder:"예: HQ01",readonlyInEdit:!0,maxLength:5},{id:"name",label:"본부 이름",type:"text",required:!0,placeholder:"예: 수도권본부",maxLength:500},{id:"shortName",label:"짧은 이름",type:"text",required:!1,placeholder:"예: 수도권",maxLength:100},{id:"description",label:"설명",type:"textarea",required:!1,rows:3,maxLength:500},{id:"sortOrder",label:"표시 순서",type:"number",required:!0,placeholder:"예: 1",min:0,max:99,maxLength:2},{id:"useYn",label:"사용 여부",type:"yesno",required:!0},{id:"registered",label:"등록 일자",type:"hidden"}];return(t,e)=>(D(),M(Y,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=r=>f.value=r),columns:i,"default-visible-columns":m,"form-fields":_,"modal-title":"본부 정보","checkbox-column-width":Q,"id-column-width":0,"id-field":"id","hide-id-column":!0,"preference-key":"vms_headquarters_info",onUpdate:w,onDelete:a},null,8,["modelValue"]))}}),J=I(X,[["__scopeId","data-v-18decb95"]]),ee=50,te=g({__name:"BranchInfo",setup($){const s=q(),l=g({props:{value:{type:[String,Number],default:""}},setup(r){return()=>S("span",{class:"text-sm text-slate-700"},String(r.value||""))}}),y=g({props:{value:{type:[String,Number],default:""}},setup(r){const o=r.value==="Y"||r.value===1||String(r.value).toUpperCase()==="Y";return()=>S("span",{class:["inline-block px-2 py-0.5 rounded text-xs font-bold",o?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-500"]},o?"Y":"N")}}),u=g({props:{value:{type:[String,Number],default:""}},setup(r){const o=U();return()=>S("span",{class:"text-sm text-slate-700"},o.getCodeName("1","0",String(r.value||"")))}});function C(r){if(r==null||r==="")return"";const o=String(r).trim();return o.length>=10?o.slice(0,10):o}const p=g({props:{value:{type:[String,Number],default:""}},setup(r){return()=>S("span",{class:"text-sm text-slate-700"},C(r.value))}}),i=[70,150,150,250,100,100,120],m=[{id:"code",header:"코드",size:i[0],cellComponent:l},{id:"name",header:"지사 이름",size:i[1],cellComponent:l},{id:"headquarters",header:"소속 본부",size:i[2],cellComponent:u},{id:"description",header:"설명",size:i[3],cellComponent:l},{id:"sortOrder",header:"표시 순서",size:i[4],cellComponent:l},{id:"useYn",header:"사용 여부",size:i[5],cellComponent:y},{id:"registered",header:"등록 일자",size:i[6],cellComponent:p}],h=["code","name","headquarters","description","sortOrder","useYn","registered"],f=U(),w=k(()=>f.getByGrpGbn("1").filter(o=>String(o.grp_code||"")==="0").map(o=>({value:o.code||"",label:(o.code_name||"").trim()||String(o.code||"")}))),a=k(()=>f.getByGrpGbn("2").map(o=>({id:`${o.grp_gbn}_${o.code}`,code:o.code||"",name:o.code_name||"",headquarters:o.grp_code||"",description:o.remarks||"",sortOrder:o.ord||0,useYn:o.use_yn||"N",registered:o.reg_timestamp||""}))),_=async(r,o)=>{var n,d;try{const c=new Date,b=`${c.getFullYear()}-${String(c.getMonth()+1).padStart(2,"0")}-${String(c.getDate()).padStart(2,"0")} ${String(c.getHours()).padStart(2,"0")}:${String(c.getMinutes()).padStart(2,"0")}:${String(c.getSeconds()).padStart(2,"0")}`,x={grp_gbn:"2",grp_code:r.headquarters||r.code||"",code:r.code||"",code_name:r.name||"",short_code_name:r.name||"",remarks:r.description||null,ord:r.sortOrder||0,use_yn:r.useYn||"Y",reg_timestamp:o?b:r.registered||null};if(o)await f.createCommonCode(x);else{const z=(r.id||"").split("_");if(z.length<2){s.show("잘못된 데이터 키입니다.","error");return}const A=z[0],V=z.slice(1).join("_");await f.updateCommonCodeByGbnAndCode(A,V,x)}s.show(o?"신규 생성 완료":"수정 완료","success")}catch(c){console.error("데이터 저장 실패:",c);const b=f.error||((d=(n=c.response)==null?void 0:n.data)==null?void 0:d.detail)||"데이터 저장 중 오류가 발생했습니다.";s.show(b,"error")}},t=async r=>{var o,n;try{await f.deleteCommonCodes(r),s.show("삭제 완료","success")}catch(d){console.error("데이터 삭제 실패:",d);const c=f.error||((n=(o=d.response)==null?void 0:o.data)==null?void 0:n.detail)||"데이터 삭제 중 오류가 발생했습니다.";s.show(c,"error")}},e=k(()=>[{id:"id",type:"hidden"},{id:"code",label:"코드",type:"text",required:!0,placeholder:"예: BR01",readonlyInEdit:!0,maxLength:5},{id:"name",label:"지사 이름",type:"text",required:!0,placeholder:"예: 동부지사",maxLength:500},{id:"headquarters",label:"소속 본부",type:"select",required:!0,placeholder:"본부 선택",options:w.value},{id:"description",label:"설명",type:"textarea",required:!1,rows:3,maxLength:500},{id:"sortOrder",label:"표시 순서",type:"number",required:!0,placeholder:"예: 1",min:0,max:99,maxLength:2},{id:"useYn",label:"사용 여부",type:"yesno",required:!0},{id:"registered",label:"등록 일자",type:"hidden"}]);return(r,o)=>(D(),M(Y,{modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=n=>a.value=n),columns:m,"default-visible-columns":h,"form-fields":e.value,"modal-title":"지사 정보","checkbox-column-width":ee,"id-column-width":0,"id-field":"id","hide-id-column":!0,"preference-key":"vms_branch_info",onUpdate:_,onDelete:t},null,8,["modelValue","form-fields"]))}}),re=I(te,[["__scopeId","data-v-fe4e339f"]]),oe=50,ne=g({__name:"RouteInfo",setup($){const s=q(),l=g({props:{value:{type:[String,Number],default:""}},setup(t){return()=>S("span",{class:"text-sm text-slate-700"},String(t.value||""))}}),y=g({props:{value:{type:[String,Number],default:""}},setup(t){const e=t.value==="Y"||t.value===1||String(t.value).toUpperCase()==="Y";return()=>S("span",{class:["inline-block px-2 py-0.5 rounded text-xs font-bold",e?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-500"]},e?"Y":"N")}});function u(t){if(t==null||t==="")return"";const e=String(t).trim();return e.length>=10?e.slice(0,10):e}const C=g({props:{value:{type:[String,Number],default:""}},setup(t){return()=>S("span",{class:"text-sm text-slate-700"},u(t.value))}}),p=[70,200,150,250,100,100,120],i=[{id:"code",header:"코드",size:p[0],cellComponent:l},{id:"fullName",header:"정식 노선 이름",size:p[1],cellComponent:l},{id:"shortName",header:"간략 노선 이름",size:p[2],cellComponent:l},{id:"description",header:"설명",size:p[3],cellComponent:l},{id:"sortOrder",header:"표시 순서",size:p[4],cellComponent:l},{id:"useYn",header:"사용 여부",size:p[5],cellComponent:y},{id:"registered",header:"등록 일자",size:p[6],cellComponent:C}],m=["code","fullName","shortName","description","sortOrder","useYn","registered"],h=U(),f=k(()=>h.getByGrpGbn("4").map(e=>({id:`${e.grp_gbn}_${e.code}`,code:e.code||"",fullName:e.code_name||"",shortName:e.short_code_name||e.code_name||"",description:e.remarks||"",sortOrder:e.ord||0,useYn:e.use_yn||"N",registered:e.reg_timestamp||""}))),w=async(t,e)=>{var r,o;try{const n=new Date,d=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")} ${String(n.getHours()).padStart(2,"0")}:${String(n.getMinutes()).padStart(2,"0")}:${String(n.getSeconds()).padStart(2,"0")}`,c={grp_gbn:"4",grp_code:t.code||"",code:t.code||"",code_name:t.fullName||"",short_code_name:t.shortName||t.fullName||"",remarks:t.description||null,ord:t.sortOrder||0,use_yn:t.useYn||"Y",reg_timestamp:e?d:t.registered||null};if(e)await h.createCommonCode(c);else{const x=(t.id||"").split("_");if(x.length<2){s.show("잘못된 데이터 키입니다.","error");return}const N=x[0],z=x.slice(1).join("_");await h.updateCommonCodeByGbnAndCode(N,z,c)}s.show(e?"신규 생성 완료":"수정 완료","success")}catch(n){console.error("데이터 저장 실패:",n);const d=h.error||((o=(r=n.response)==null?void 0:r.data)==null?void 0:o.detail)||"데이터 저장 중 오류가 발생했습니다.";s.show(d,"error")}},a=async t=>{var e,r;try{await h.deleteCommonCodes(t),s.show("삭제 완료","success")}catch(o){console.error("데이터 삭제 실패:",o);const n=h.error||((r=(e=o.response)==null?void 0:e.data)==null?void 0:r.detail)||"데이터 삭제 중 오류가 발생했습니다.";s.show(n,"error")}},_=[{id:"id",type:"hidden"},{id:"code",label:"코드",type:"text",required:!0,placeholder:"예: RT01",readonlyInEdit:!0,maxLength:5},{id:"fullName",label:"정식 노선 이름",type:"text",required:!0,placeholder:"예: 경부고속도로",maxLength:500},{id:"shortName",label:"간략 노선 이름",type:"text",required:!0,placeholder:"예: 경부선",maxLength:100},{id:"description",label:"설명",type:"textarea",required:!1,rows:3,maxLength:500},{id:"sortOrder",label:"표시 순서",type:"number",required:!0,placeholder:"예: 1",min:0,max:99,maxLength:2},{id:"useYn",label:"사용 여부",type:"yesno",required:!0},{id:"registered",label:"등록 일자",type:"hidden"}];return(t,e)=>(D(),M(Y,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=r=>f.value=r),columns:i,"default-visible-columns":m,"form-fields":_,"modal-title":"노선 정보","checkbox-column-width":oe,"id-column-width":0,"id-field":"id","hide-id-column":!0,"preference-key":"vms_route_info",onUpdate:w,onDelete:a},null,8,["modelValue"]))}}),se=I(ne,[["__scopeId","data-v-d9f428f8"]]),ae=50,le=g({__name:"TerminalInfo",setup($){const s=q(),l=g({props:{value:{type:[String,Number],default:""}},setup(t){return()=>S("span",{class:"text-sm text-slate-700"},String(t.value||""))}});function y(t){if(t==null||t==="")return"";const e=String(t).trim();return e.length>=10?e.slice(0,10):e}const u=g({props:{value:{type:[String,Number],default:""}},setup(t){return()=>S("span",{class:"text-sm text-slate-700"},y(t.value))}}),C=[200,200,200],p=[{id:"name",header:"운영 단말 이름",size:C[0],cellComponent:l},{id:"ip",header:"단말기 IP 주소",size:C[1],cellComponent:l},{id:"regDate",header:"등록일자",size:C[2],cellComponent:u}],i=["name","ip","regDate"],m=O([]),h=async()=>{try{const e=(await v.get("/api/rest-access-page/MGMT_OPER_TERMINAL")).data.map(r=>({key:r.key,name:r.term_name||"",ip:r.ip_addr||"",regDate:y(r.reg_date)}));m.value=e}catch(t){console.error("운영단말 정보 로드 실패:",t),m.value=[]}};function f(){const t=new Date,e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${e}-${r}-${o}`}const w=async(t,e)=>{var r,o;try{const n={term_name:t.name||"",ip_addr:t.ip||""};if(e){const d=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`TERM_${Date.now()}_${Math.random().toString(36).slice(2,11)}`;n.key=d(),n.reg_date=f(),await v.post("/api/rest-access-page/MGMT_OPER_TERMINAL",n)}else await v.put("/api/rest-access-page/MGMT_OPER_TERMINAL",{key:t.key,...n});s.show(e?"신규 생성 완료":"수정 완료","success"),await h()}catch(n){console.error("데이터 저장 실패:",n);const d=((o=(r=n.response)==null?void 0:r.data)==null?void 0:o.detail)||"데이터 저장 중 오류가 발생했습니다.";s.show(d,"error")}},a=async t=>{var e,r;try{for(const o of t)await v.delete("/api/rest-access-page/MGMT_OPER_TERMINAL",{params:{key:o}});s.show("삭제 완료","success"),await h()}catch(o){console.error("데이터 삭제 실패:",o);const n=((r=(e=o.response)==null?void 0:e.data)==null?void 0:r.detail)||"데이터 삭제 중 오류가 발생했습니다.";s.show(n,"error")}};T(()=>{h()});const _=[{id:"key",label:"",type:"hidden"},{id:"name",label:"운영 단말 이름",type:"text",required:!0,placeholder:"예: 운영단말-01"},{id:"ip",label:"단말기 IP 주소",type:"ip",required:!0,placeholder:"",pattern:"^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])$",patternMessage:"단말기 IP 주소는 0.0.0.0 ~ 255.255.255.255 형식으로 입력해 주세요."}];return(t,e)=>(D(),M(Y,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=r=>m.value=r),columns:p,"default-visible-columns":i,"form-fields":_,"modal-title":"운영단말","checkbox-column-width":ae,"id-field":"key","hide-id-column":!0,"preference-key":"vms_terminal_info",onUpdate:w,onDelete:a},null,8,["modelValue"]))}}),de=I(le,[["__scopeId","data-v-4dcae45a"]]),ce=50,ie=g({__name:"UserAccount",setup($){const s=q(),l=g({props:{value:{type:[String,Number],default:""}},setup(a){return()=>S("span",{class:"text-sm text-slate-700"},String(a.value||""))}}),y=g({props:{value:{type:[String,Number],default:""}},setup(a){const _=a.value==="Y"||a.value===1;return()=>S("span",{class:["inline-block px-2 py-0.5 rounded text-xs font-bold",_?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-500"]},_?"Y":"N")}}),u=[120,100,80,90,120,100,150],C=[{id:"userId",header:"사용자 ID",size:u[0],cellComponent:l},{id:"name",header:"사용자 이름",size:u[1],cellComponent:l},{id:"groupName",header:"그룹",size:u[2],cellComponent:l},{id:"canSendSms",header:"SMS 허용",size:u[3],cellComponent:y},{id:"phone",header:"전화번호",size:u[4],cellComponent:l},{id:"email",header:"Email",size:u[5],cellComponent:l},{id:"memo",header:"메모",size:u[6],cellComponent:l}],p=["userId","name","groupName","canSendSms","phone","email","memo"],i=O([]),m=async()=>{try{const _=(await v.get("/api/rest-access-page/MGMT_USER")).data.map(t=>({id:t.user_id??t.USER_ID??"",userId:t.user_id??t.USER_ID??"",name:t.user_name??t.USER_NAME??"",email:t.email??t.EMAIL??"",phone:t.phone??t.PHONE??"",memo:t.memo??t.MEMO??"",canSendSms:t.can_send_sms??t.CAN_SEND_SMS??0,groupName:t.group_name??t.GROUP_NAME??""}));i.value=_}catch(a){console.error("사용자 계정 로드 실패:",a),i.value=[]}},h=async(a,_)=>{var t,e,r,o,n,d;try{const c={USER_ID:a.userId||a.id||"",USER_NAME:a.name||"",EMAIL:a.email||null,PHONE:a.phone||null,MEMO:a.memo||null,CAN_SEND_SMS:a.canSendSms==="Y"||a.canSendSms===1?1:0,GROUP_NAME:a.groupName||null};if(_){if(!((t=a.password)!=null&&t.trim())){s.show("신규 사용자는 암호를 입력해야 합니다.","warning");return}const x=(e=(await v.get("/api/auth/nonce")).data)==null?void 0:e.nonce;if(!x){s.show("넌스 발급에 실패했습니다.","error");return}c.PASSWORD=await R(a.password.trim()),c.NONCE=x,await v.post("/api/rest-access-page/MGMT_USER",c)}else{if((r=a.password)!=null&&r.trim()){const x=(o=(await v.get("/api/auth/nonce")).data)==null?void 0:o.nonce;if(!x){s.show("넌스 발급에 실패했습니다.","error");return}c.PASSWORD=await R(a.password.trim()),c.NONCE=x}await v.put("/api/rest-access-page/MGMT_USER",c)}s.show(_?"신규 생성 완료":"수정 완료","success"),await m()}catch(c){console.error("데이터 저장 실패:",c);const b=(d=(n=c.response)==null?void 0:n.data)==null?void 0:d.detail,x=typeof b=="string"?b:Array.isArray(b)?b.map(N=>(N==null?void 0:N.msg)??N).join(", "):(b==null?void 0:b.message)||"데이터 저장 중 오류가 발생했습니다.";s.show(`저장 실패: ${x}`,"error")}},f=async a=>{var _,t;try{for(const e of a)await v.delete("/api/rest-access-page/MGMT_USER",{params:{key:e}});s.show("삭제 완료","success"),await m()}catch(e){console.error("데이터 삭제 실패:",e);const r=((t=(_=e.response)==null?void 0:_.data)==null?void 0:t.detail)||"데이터 삭제 중 오류가 발생했습니다.";s.show(r,"error")}};T(()=>{m()});const w=[{id:"userId",label:"사용자 ID",type:"text",required:!0,placeholder:""},{id:"name",label:"사용자 이름",type:"text",required:!0,placeholder:""},{id:"password",label:"암호",type:"password",required:!1,placeholder:"신규: 필수, 수정: 변경 시만 입력"},{id:"groupName",label:"그룹",type:"toggle",required:!1,options:[{value:"user",label:"User"},{value:"admin",label:"Admin"}]},{id:"email",label:"Email",type:"text",required:!1,placeholder:"예: user@example.com",maxLength:100,pattern:"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$",patternMessage:"올바른 이메일 형식으로 입력해 주세요."},{id:"phone",label:"전화 번호",type:"text",required:!1,placeholder:"예: 010-1234-5678",maxLength:64,pattern:"^[0-9\\s-()+]*$",patternMessage:"숫자, 공백, 하이픈(-), 괄호만 입력 가능합니다."},{id:"canSendSms",label:"SMS 전송 허용",type:"yesno",required:!1},{id:"memo",label:"메모",type:"textarea",required:!1,rows:3}];return(a,_)=>(D(),M(Y,{modelValue:i.value,"onUpdate:modelValue":_[0]||(_[0]=t=>i.value=t),columns:C,"default-visible-columns":p,"form-fields":w,"modal-title":"사용자 계정","checkbox-column-width":ce,"id-column-width":0,"id-field":"id","preference-key":"vms_user_account",onUpdate:h,onDelete:f},null,8,["modelValue"]))}}),ue=I(ie,[["__scopeId","data-v-40ec5cbc"]]),pe={class:"mgmt-container"},me={class:"mgmt-tabs-container"},ge={class:"mgmt-tabs-header"},he=["onClick"],_e={class:"mgmt-tabs-content"},Se=g({__name:"ManagementView",setup($){const s=["공통 코드","본부 정보","지사 정보","노선 정보","운영단말","사용자 계정"],l={"공통 코드":Z,"본부 정보":J,"지사 정보":re,"노선 정보":se,운영단말:de,"사용자 계정":ue},y=O(s[0]),u=C=>{y.value=C};return(C,p)=>(D(),L("div",pe,[E("div",me,[E("div",ge,[(D(),L(W,null,B(s,i=>E("button",{key:i,onClick:m=>u(i),class:F(["mgmt-tab-button",{active:y.value===i}])},P(i),11,he)),64))]),E("div",_e,[(D(),M(H(l[y.value])))])])]))}});export{Se as default};
